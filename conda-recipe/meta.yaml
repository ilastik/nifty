
package:
    name: nifty
    version: v1.0.7

source:
  path: ..

build:
  number: 8

requirements:
  build:
    - cmake
    - {{ compiler("cxx")}}
  host:
    - python {{ python }}
    - boost-cpp {{ boost }}
    - numpy {{ numpy }}
    - xtensor >=0.19,<0.20
    - xtensor-python >=0.22,<0.23
    - nlohmann_json
    - blosc  # [linux]
    - bzip2  # [linux]
    - zlib  # [linux]
    - z5py {{ z5py }} # [linux]
    - vigra

  run:
    - {{ pin_compatible("python") }}
    - {{ pin_compatible("numpy") }}
    - {{ pin_compatible("z5py") }}  # [linux]
    - scikit-image
    - vigra
    - blosc  # [linux]
    - bzip2  # [linux]
    - zlib  # [linux]

test:
    imports:
      - nifty
    source_files:
      - src/python/test/graph/*.py
    commands:
      - python -m unittest discover -s src/python/test -v

about:
  home: https://github.com/DerThorsten/nifty
  license: MIT
  summary: Graph-based segmentation algorithms
